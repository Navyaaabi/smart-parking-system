<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Contact | Smart Parking</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body class="font-[Poppins] min-h-screen bg-gradient-to-br from-indigo-600 via-blue-600 to-sky-500 flex items-center justify-center px-4">

<!-- BACK BUTTON -->
<a href="{{ url_for('home') }}"
   class="absolute top-6 left-6 bg-white text-blue-600 px-4 py-2 rounded-xl shadow hover:scale-105 transition font-semibold">
  â† Back
</a>

<!-- CARD -->
<div class="bg-white/90 backdrop-blur-lg shadow-2xl rounded-3xl w-full max-w-md p-8">

  <h2 class="text-3xl font-bold text-center text-blue-700 mb-2">
    Contact Us ğŸ’¬
  </h2>
  <p class="text-center text-gray-600 mb-6 text-sm">
    Have questions? Send us a message and weâ€™ll get back to you.
  </p>

  <!-- FORM -->
  <form id="contactForm" action="{{ url_for('data') }}" method="POST" class="space-y-4">

    <div>
      <input type="text" name="name" id="username" placeholder="Your Name"
        class="w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
        required>
    </div>

    <div>
      <input type="email" name="email" id="email" placeholder="Your Email"
        class="w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
        required>
    </div>

    <div>
      <textarea name="message" id="message" rows="4"
        placeholder="Type your message..."
        class="w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
        maxlength="250"
        required></textarea>

      <!-- Character Counter (DOM Feature) -->
      <p class="text-right text-xs text-gray-500 mt-1">
        <span id="charCount">0</span>/250
      </p>
    </div>

    <!-- ERROR MESSAGE -->
    <p id="error" class="text-red-600 text-sm text-center"></p>

    <button type="submit"
      class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition">
      Send Message ğŸš€
    </button>

  </form>

  <!-- SUCCESS MESSAGE -->
  <p id="successMsg" class="hidden text-green-600 text-center font-semibold mt-4">
    âœ… Message sent successfully!
  </p>

</div>

<!-- JAVASCRIPT DOM FEATURES -->
<script>
  const form = document.getElementById("contactForm");
  const error = document.getElementById("error");
  const success = document.getElementById("successMsg");
  const messageInput = document.getElementById("message");
  const charCount = document.getElementById("charCount");

  // Live character counter
  messageInput.addEventListener("input", () => {
    charCount.textContent = messageInput.value.length;
  });

  form.addEventListener("submit", function (e) {
    const username = document.getElementById("username").value.trim();
    const email = document.getElementById("email").value.trim();
    const message = messageInput.value.trim();

    const emailPattern = /^[a-zA-Z][a-zA-Z0-9._%+-]*@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

    error.textContent = "";

    if (username === "") {
      error.textContent = "Please enter your name.";
      e.preventDefault();
      return;
    }

    if (!emailPattern.test(email)) {
      error.textContent = "Please enter a valid email address.";
      e.preventDefault();
      return;
    }

    if (message.length < 5) {
      error.textContent = "Message must be at least 5 characters.";
      e.preventDefault();
      return;
    }

    // UX feedback (DOM feature)
    success.classList.remove("hidden");
  });
</script>

</body>
</html>
